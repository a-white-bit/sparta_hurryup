<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지출을막아줘</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .background {
            padding-top: 400px;

            color: white;
            text-align: center;
            margin: 0 auto;

            background-image: url('https://cdn.pixabay.com/photo/2019/11/27/00/55/money-4655836_1280.jpg');
            background-size: cover;
        }

        .enrollInput {
            display: none;
        }
    </style>

    <script type="module">

        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // Firebase 구성 정보 설정
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDsb9smlR201DL-vtzFHwmPimt3JqROrDI",
            authDomain: "stop-splurging.firebaseapp.com",
            projectId: "stop-splurging",
            storageBucket: "stop-splurging.appspot.com",
            messagingSenderId: "398059301266",
            appId: "1:398059301266:web:cf439919b22a2fb26c394b",
            measurementId: "G-BCWCBW84MD"
        };

        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        $("#enrollment").click(async function () {
            if (document.getElementById("enrollInput").style.display == "none") {
                document.getElementById("enrollInput").style.display = "";
            }
            else {
                let name = $('#userName').val();
                let pw = $('#userPassword').val();
                console.log(name, pw);
                if (name != '' && pw != '') {
                    let doc = {
                        'password': pw
                    };
                    await addDoc(collection(db, name), doc);
                    alert('DB 저장 완료');
                    window.location.reload();
                }
                else {
                    alert('잘못된 입력입니다.');
                }
            }


        })

    </script>
</head>

<body class="background">
    <div>
        <h1>지출을 막아줘</h1>
        <h5>과소비 막기 프로젝트</h5>
    </div>
    <div>
        <button>로그인</button>
    </div>
    <div>
        <div id="enrollInput" style="display:none;">
            사용자 이름: <input id="userName" value="" /><br>
            비밀번호를 입력하세요: <input id="userPassword" type='password' value="" />
        </div>
        <button id="enrollment">사용자 등록</button>
    </div>


</body>

</html>